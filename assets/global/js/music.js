(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music"],{"185b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"music-page"},[a("div",{staticClass:"container"},[a("div",{staticClass:"music"},[a("aside",{staticClass:"sidebar"},[a("Panel",{attrs:{header:"搜索"}},[a("div",{staticClass:"form-item"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"form-control theme",attrs:{type:"search",placeholder:"请输入名称"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticClass:"w-btn w-btn-brand",on:{click:t.handleSearch}},[t._v("\n              搜索\n            ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchArray.length>0,expression:"searchArray.length > 0"}],staticClass:"toolbar"},[a("div",{staticClass:"inner-title"},[t._v("历史记录")]),a("a",{staticClass:"w-btn icon-only",attrs:{href:"javascript:;"},on:{click:t.tagHistoryClear}},[a("w-icon",{attrs:{name:"delete"}})],1)]),a("div",{staticClass:"tags-cloud"},t._l(t.searchArray,(function(e,s){return a("button",{key:"tag-"+s,staticClass:"tag-item",on:{click:function(a){return t.tagSearch(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])})),0)])],1),a("div",{staticClass:"music-list"},[a("Panel",{staticClass:"music-list-panel",attrs:{header:"最佳匹配"}},[a("transition-group",{attrs:{name:"scale"}},t._l(t.musics,(function(e,s){return a("Media",{key:"music-"+s,on:{getMediaSong:function(a){return t.getMusicSong(e)}}},[a("img",{staticClass:"media-image",attrs:{slot:"header",src:e.pic},slot:"header"}),a("div",{staticClass:"media-content"},[a("h5",{staticClass:"media-title",attrs:{"data-href":e.link}},[t._v("\n                  "+t._s(e.title)+"\n                ")]),a("p",{staticClass:"media-author"},[t._v(t._s(e.author))])]),a("div",{staticClass:"media-status"},[a("w-icon",{class:[t.getMusicStatus(e.songid)],attrs:{name:"music-playing"}})],1)])})),1),0===t.musics.length?a("div",{staticClass:"empty"},[a("p",[a("svg",{staticClass:"icon svg-icon icon-music"},[a("use",{attrs:{"xlink:href":"#icon-music"}})]),t._v("\n              这里什么都没有哦，赶紧动手搜索试试吧~\n            ")])]):t._e()],1)],1)]),a("Player")],1)])},r=[],n=(a("6762"),a("2fdb"),a("28a5"),a("7f7f"),a("96cf"),a("3b8d")),i=a("d225"),c=a("b0b4"),o=a("308d"),u=a("6bb5"),l=a("4e2b"),h=a("9ab4"),m=a("60a3"),d=a("4bb5"),p=a("3534"),f=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.name="",t.playing=0,t.searchHistory="",t}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"updated",value:function(){console.log("searchHistory: ".concat(this.searchHistory))}},{key:"tagSearch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.name=e,t.next=3,this.search_local_music(e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"tagHistoryClear",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchHistory="",this.searchArray=[],localStorage.setItem("searchHistory",this.searchHistory),t.next=5,this.clear_music();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSearch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.name){t.next=2;break}return t.abrupt("return",!1);case 2:return e=localStorage.getItem("searchHistory")||"",a=e?e.split(","):[],a.includes(this.name)||(a.unshift(this.name),this.searchHistory=a.join(","),localStorage.setItem("searchHistory",this.searchHistory)),t.next=7,this.search_music(this.name);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getMusicSong",value:function(t){this.playing=t.songid,this.get_song(t)}},{key:"getMusicStatus",value:function(t){return t===this.playing?"icon-playing":"icon-paused"}},{key:"searchArray",get:function(){var t=this.searchHistory||localStorage.getItem("searchHistory")||"";return t?t.split(","):[]},set:function(t){}}]),e}(m["e"]);Object(h["a"])([d["b"]],f.prototype,"musics",void 0),Object(h["a"])([Object(d["a"])("SEARCH_MUSIC")],f.prototype,"search_music",void 0),Object(h["a"])([Object(d["a"])("SEARCH_LOCAL_MUSIC")],f.prototype,"search_local_music",void 0),Object(h["a"])([Object(d["a"])("GET_SONG")],f.prototype,"get_song",void 0),Object(h["a"])([Object(d["a"])("ClEAR_MUSIC")],f.prototype,"clear_music",void 0),f=Object(h["a"])([Object(m["a"])({components:{Panel:p["f"],Media:p["e"],Player:p["g"],wIcon:p["c"]}})],f);var g=f,v=g,b=(a("fb69"),a("2877")),y=Object(b["a"])(v,s,r,!1,null,"1de198d1",null);e["default"]=y.exports},"2fdb":function(t,e,a){"use strict";var s=a("5ca1"),r=a("d2c8"),n="includes";s(s.P+s.F*a("5147")(n),"String",{includes:function(t){return!!~r(this,t,n).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,a){var s=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[s]=!1,!"/./"[t](e)}catch(r){}}return!0}},6762:function(t,e,a){"use strict";var s=a("5ca1"),r=a("c366")(!0);s(s.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},d2c8:function(t,e,a){var s=a("aae3"),r=a("be13");t.exports=function(t,e,a){if(s(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(r(t))}},f0f7:function(t,e,a){},fb69:function(t,e,a){"use strict";var s=a("f0f7"),r=a.n(s);r.a}}]);